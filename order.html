<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Odesl√°n√≠ objedn√°vky | iMart-Store</title>
<style>
body {
    background:#000;
    color:#fff;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    padding:40px 20px;
}

h1{
    font-size:28px;
    text-align:center;
    margin-bottom:30px;
    font-weight:900;
    text-shadow: 0 2px 8px rgba(255,255,255,0.2);
}

#order-container {
    max-width:800px;
    margin:auto;
}

.order-item{
    display:flex;
    align-items:center;
    justify-content:space-between;
    margin-bottom:15px;
    padding:15px;
    border:1px solid #444;
    border-radius:12px;
    background:#111;
}

.order-item img{
    width:80px;
    height:80px;
    border-radius:10px;
    margin-right:15px;
}

.order-info{
    flex:1;
}

.order-info strong{
    display:block;
    font-size:18px;
    margin-bottom:6px;
}

.order-info span{
    display:block;
    font-size:14px;
    opacity:0.85;
}

.order-item-qty{
    display:flex;
    align-items:center;
    gap:8px;
    margin-top:5px;
}

.order-item-qty button{
    width:30px;
    height:30px;
    font-size:18px;
    border:none;
    border-radius:6px;
    background:#fff;
    color:#000;
    cursor:pointer;
}

.order-item-qty input{
    width:50px;
    text-align:center;
    border-radius:6px;
    border:1px solid #fff;
    background:#000;
    color:#fff;
    font-weight:bold;
    font-size:16px;
}

.total{
    font-size:22px;
    font-weight:bold;
    margin-top:20px;
    text-align:right;
}

.submit-btn{
    margin-top:30px;
    width:100%;
    padding:14px;
    font-size:18px;
    border:none;
    border-radius:12px;
    background:#fff;
    color:#000;
    font-weight:bold;
    cursor:pointer;
}

@media(max-width:480px){
    .order-item{
        flex-direction:column;
        align-items:flex-start;
    }
    .order-item img{margin-bottom:10px;}
}
</style>
</head>
<body>

<h1>Odesl√°n√≠ objedn√°vky üõí</h1>

<div id="order-container"></div>
<div class="total" id="order-total"></div>

<button class="submit-btn" onclick="sendOrder()">Odeslat objedn√°vku</button>

<script>
function loadOrder(){
    const data = JSON.parse(localStorage.getItem('order') || '{}');
    if(!data.name) return;

    const container = document.getElementById('order-container');
    container.innerHTML = `
    <div class="order-item">
        <img src="${data.img}">
        <div class="order-info">
            <strong>${data.name}</strong>
            <span>Barva: ${data.color}</span>
            <div class="order-item-qty">
                <button class="qty-minus">‚àí</button>
                <input type="number" value="${data.qty}" min="1">
                <button class="qty-plus">+</button>
            </div>
            <span>Cena za kus: ${data.price} Kƒç</span>
        </div>
        <div class="order-price">${data.price * data.qty} Kƒç</div>
    </div>
    `;

    const item = container.querySelector('.order-item');
    const qtyInput = item.querySelector('input');
    const minusBtn = item.querySelector('.qty-minus');
    const plusBtn = item.querySelector('.qty-plus');
    const priceEl = item.querySelector('.order-price');

    function updatePrice(){
        let val = Math.max(1, parseInt(qtyInput.value));
        qtyInput.value = val;
        priceEl.innerText = val * data.price + " Kƒç";
        document.getElementById('order-total').innerText = "Celkem: " + (val*data.price) + " Kƒç";
        data.qty = val;
        localStorage.setItem('order', JSON.stringify(data));
    }

    minusBtn.addEventListener('click', ()=>{ qtyInput.value = parseInt(qtyInput.value)-1; updatePrice(); });
    plusBtn.addEventListener('click', ()=>{ qtyInput.value = parseInt(qtyInput.value)+1; updatePrice(); });
    qtyInput.addEventListener('change', updatePrice);

    document.getElementById('order-total').innerText = "Celkem: " + (data.qty * data.price) + " Kƒç";
}

function sendOrder(){
    const data = JSON.parse(localStorage.getItem('order') || '{}');
    if(!data.name) return alert("Ko≈°√≠k je pr√°zdn√Ω!");

    const text = `Objedn√°vka:\n${data.name}\nBarva: ${data.color}\nPoƒçet: ${data.qty}\nCelkem: ${data.qty*data.price} Kƒç`;
    // WhatsApp
    window.open("https://wa.me/420702846018?text=" + encodeURIComponent(text));
    // Telegram (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ, –º–æ–∂–Ω–æ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å)
    // window.open("https://t.me/Appledestroyer1?text=" + encodeURIComponent(text));

    localStorage.removeItem('order');
    location.reload();
}

document.addEventListener('DOMContentLoaded', loadOrder);
</script>

</body>
</html>
